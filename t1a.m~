close all
clc
clf
clear all

gridSize = 10;
treeProb = 0.3;

grid = zeros(gridSize);

for i = 1:gridSize^2
    if rand()>treeProb
        grid(i) = 1;
    end
end

grid = zeros(gridSize);
grid(:,5) = 1;

xStart = ceil(rand()*gridSize);
yStart = ceil(rand()*gridSize);
xStart = 9;
yStart = 5;
grid(xStart,yStart) = 2;

fire = find(grid == 2);
burning = true;
while burning
    image(25*grid)
    pause(1)

    for i = 1:length(fire)
        xFire = mod(fire(i)-1,gridSize)+1;
        yFire = mod(floor((fire(i)-1)/gridSize),gridSize)+1;
        if grid(mod(xFire-1 + 1,gridSize)+1,yFire) == 1
            grid(mod(xFire-1 + 1,gridSize)+1,yFire) = 2;
        end
        if grid(mod(xFire-1 - 1,gridSize)+1,yFire) == 1
            grid(mod(xFire-1 - 1,gridSize)+1,yFire) = 2;
        end
        if grid(xFire,mod(yFire-1 + 1,gridSize)+1) == 1
            grid(xFire,mod(yFire-1 + 1,gridSize)+1) = 2;
        end
        if grid(xFire,mod(yFire-1 - 1, gridSize)+1) == 1
            grid(xFire,mod(yFire-1 - 1, gridSize)+1) = 2;
        end
        
        grid(xFire,yFire) = 3;
    end
        
    fire = find(grid == 2);
    if isempty(fire)
        burning = false;
    end
end

disp('Done!')
